var src = [
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_0.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_01.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_02.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_03.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_04.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_05.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_06.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_07.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_08.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_09.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_10.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_11.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_12.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_13.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_14.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_15.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_16.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_17.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_18.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_19.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_20.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_21.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_22.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_23.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_24.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_25.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_26.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_27.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_28.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_29.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_30.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_31.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_32.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_33.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_34.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_35.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_36.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_37.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_38.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_39.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_40.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_41.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_42.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_43.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_44.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_45.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_46.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_47.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_48.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_49.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_50.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_51.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_52.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_53.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_54.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_55.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_56.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_57.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_58.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_59.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_60.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_61.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_62.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_63.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_64.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_65.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_66.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_67.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_68.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_69.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_70.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_71.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_72.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_73.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_74.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_75.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_76.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_77.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_78.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_79.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_80.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_81.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_82.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_83.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_84.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_85.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_86.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_87.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_88.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_89.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_90.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_91.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_92.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_93.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_94.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_95.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_96.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_97.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_98.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_99.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_100.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_101.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_102.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_103.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_104.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_105.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_106.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_107.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_108.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_109.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_110.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_111.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_112.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_113.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_114.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_115.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_116.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_117.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_118.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_119.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_120.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_121.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_122.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_123.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_124.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_125.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_126.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_127.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_128.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_129.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_130.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_131.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_132.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_133.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_134.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_135.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_136.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_137.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_138.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_139.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_140.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_141.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_142.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_143.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_144.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_145.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_146.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_147.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_148.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_149.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_150.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_151.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_160.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_161.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_162.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_163.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_164.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_165.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_166.png",
    "//kd.stu.126.net/res/kada-module-component/stickers/emoji/emoji_200.png",
];
const fs = require('fs');
const path = require('path');
const { URL } = require('url');
const https = require('https');

const download = function (url, id) {
    return new Promise((resolve, reject) => {
        https.get(new URL(url, 'https://kd.stu.126.net'), res => {
            if (res.statusCode !== 200) {
                throw new Error(res.statusMessage);
            }
            let chuk;
            res.on('data', buf => {
                chuk = Buffer.concat([chuk, buf].filter(v => v), (chuk ? chuk.length : 0) + buf.length);
            });
            res.on('end', () => {
                const path = './assets/' + id + '.' + url.split('.').pop();
                fs.writeFile(path, chuk, err => {
                    if (err) throw err;
                    resolve({ id, path, name: url.split('/').pop() });
                });
            });
            res.on('error', err => reject(err));
        }).on('error', err => {
            reject(err);
        });
    })
}

const start = async function () {
    const emoji = [];
    const imports = [];

    await Promise.all(src.map((item, index) => download(item, index + 1).then(res => {
        emoji.push({
            src: 'emoji' + res.id,
            alt: 'emoji ' + res.id
        });
        imports.push(`import emoji${res.id} from '${res.path}';`)
        console.log('[Success] ' + res.name);
    }).catch(err => {
        err.path = item;
        console.error(err);
    })));
    const assets = JSON.stringify(emoji).replace(/\"src"\:\"(\w+)\"/g, '"src":$1');
    fs.writeFile('./assets.js', `${imports.join('\n')}\nexport const assets=${assets};`, err => {
        if (err) throw err;
        console.log('[Success] assets writed!');
    });
}

start(src);
// http://kindeditor.net/ke4/plugins/emoticons/images/45.gif